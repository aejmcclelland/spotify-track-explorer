{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/andrewmcclelland/Documents/spotify-track-explorer/ste-client/src/app/me/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { setToken } from \"@/lib/auth\";\n\nexport default function LoginPage() {\n  const router = useRouter();\n  useEffect(() => {\n    const existing = localStorage.getItem(\"access_token\");\n    if (existing) {\n      // If already signed in, go straight to /me\n      router.replace(\"/me\");\n    }\n  }, [router]);\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [msg, setMsg] = useState(\"\");\n\n  async function onSubmit(e: React.FormEvent) {\n    e.preventDefault();\n    const res = await fetch(\"/api/login\", {\n      method: \"POST\",\n      body: JSON.stringify({ username, password }),\n      headers: { \"Content-Type\": \"application/json\" },\n    });\n    const data = await res.json();\n    if (!res.ok) {\n      setMsg(data.error || \"Failed to sign in\");\n      return;\n    }\n    setToken(data.access_token);\n    router.replace(\"/me\");\n    return;\n  }\n\n  return (\n    <div className=\"prose\">\n      <h1>Sign In</h1>\n      <form onSubmit={onSubmit}>\n        <label>\n          Username\n          <input\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n          />\n        </label>\n        <label>\n          Password\n          <input\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </label>\n        <button type=\"submit\">Sign In</button>\n      </form>\n      {msg && <p>{msg}</p>}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS;IACtB,MAAM,SAAS,IAAA,8QAAS;IACxB,IAAA,iVAAS,EAAC;QACR,MAAM,WAAW,aAAa,OAAO,CAAC;QACtC,IAAI,UAAU;YACZ,2CAA2C;YAC3C,OAAO,OAAO,CAAC;QACjB;IACF,GAAG;QAAC;KAAO;IAEX,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gVAAQ,EAAC;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gVAAQ,EAAC;IACzC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,gVAAQ,EAAC;IAE/B,eAAe,SAAS,CAAkB;QACxC,EAAE,cAAc;QAChB,MAAM,MAAM,MAAM,MAAM,cAAc;YACpC,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAU;YAAS;YAC1C,SAAS;gBAAE,gBAAgB;YAAmB;QAChD;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,OAAO,KAAK,KAAK,IAAI;YACrB;QACF;QACA,IAAA,8HAAQ,EAAC,KAAK,YAAY;QAC1B,OAAO,OAAO,CAAC;QACf;IACF;IAEA,qBACE,6WAAC;QAAI,WAAU;;0BACb,6WAAC;0BAAG;;;;;;0BACJ,6WAAC;gBAAK,UAAU;;kCACd,6WAAC;;4BAAM;0CAEL,6WAAC;gCACC,OAAO;gCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;kCAG/C,6WAAC;;4BAAM;0CAEL,6WAAC;gCACC,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;kCAG/C,6WAAC;wBAAO,MAAK;kCAAS;;;;;;;;;;;;YAEvB,qBAAO,6WAAC;0BAAG;;;;;;;;;;;;AAGlB","debugId":null}}]
}