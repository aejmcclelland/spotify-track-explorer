module.exports=[19032,a=>{"use strict";a.s(["delJson",()=>e,"getJson",()=>d,"postJson",()=>c]);let b=process.env.NEXT_PUBLIC_API_BASE??"http://localhost:8080";async function c(a,c){let d={"Content-Type":"application/json"};console.debug("API fetch",a,{hasAuth:!!d.Authorization});let e=await fetch(`${b}${a}`,{method:"POST",headers:d,body:JSON.stringify(c)});if(!e.ok)throw Error(await e.text()||`HTTP ${e.status}`);return e.json()}async function d(a){let c={};console.debug("API fetch",a,{hasAuth:!!c.Authorization});let d=await fetch(`${b}${a}`,{headers:c,cache:"no-store"});if(!d.ok)throw Error(await d.text()||`HTTP ${d.status}`);return d.json()}async function e(a){let c={};console.debug("API delete",a,{hasAuth:!!c.Authorization});let d=await fetch(`${b}${a}`,{method:"DELETE",headers:c});if(!d.ok)throw Error(await d.text()||`HTTP ${d.status}`)}},93482,a=>{"use strict";a.s(["default",()=>h]);var b=a.i(62255),c=a.i(39059),d=a.i(19032),e=a.i(12866),f=a.i(23488),g=a.i(63672);function h(){let a=(0,f.useRouter)(),{authed:h}=(0,e.useAuth)(),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!1);async function q(b){b.preventDefault(),p(!0),n(null);try{let b=await (0,d.postJson)("/api/auth/token",{username:i,password:k});(0,g.setToken)(b.access_token),a.replace("/")}catch(b){let a=b instanceof Error?b.message:"Login failed";n(a.includes("Invalid email or password")?"Invalid email or password":a||"Login failed")}finally{p(!1)}}return(0,c.useEffect)(()=>{h&&a.replace("/")},[h,a]),(0,b.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Sign in"}),(0,b.jsxs)("form",{className:"space-y-4",onSubmit:q,children:[(0,b.jsx)("input",{className:"input input-bordered w-full",placeholder:"email",type:"email",value:i,onChange:a=>j(a.target.value),required:!0}),(0,b.jsx)("input",{className:"input input-bordered w-full",placeholder:"password",type:"password",value:k,onChange:a=>l(a.target.value),required:!0}),(0,b.jsx)("button",{className:`btn btn-primary w-full ${o?"loading":""}`,disabled:o,children:"Sign in"})]}),m&&(0,b.jsx)("div",{className:"alert mt-4",children:m})]})}}];

//# sourceMappingURL=src_0e452612._.js.map