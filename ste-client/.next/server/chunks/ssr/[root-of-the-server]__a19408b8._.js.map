{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/andrewmcclelland/Documents/spotify-track-explorer/ste-client/src/lib/auth.ts"],"sourcesContent":["export const TOKEN_KEY = \"access_token\";\n\nexport function setToken(token: string) {\n  if (typeof window === \"undefined\") return;\n  localStorage.setItem(TOKEN_KEY, token);\n  // notify all tabs/components\n  window.dispatchEvent(new CustomEvent(\"ste-auth\"));\n}\n\nexport function getToken(): string | null {\n  if (typeof window === \"undefined\") return null;\n  return localStorage.getItem(TOKEN_KEY);\n}\n\nexport function clearToken() {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(TOKEN_KEY);\n  window.dispatchEvent(new CustomEvent(\"ste-auth\"));\n}\n\nexport function isLoggedIn() {\n  return !!getToken();\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAO,MAAM,YAAY;AAElB,SAAS,SAAS,KAAa;IACpC,wCAAmC;;;AAIrC;AAEO,SAAS;IACd,wCAAmC,OAAO;;;AAE5C;AAEO,SAAS;IACd,wCAAmC;;;AAGrC;AAEO,SAAS;IACd,OAAO,CAAC,CAAC;AACX","debugId":null}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///Users/andrewmcclelland/Documents/spotify-track-explorer/ste-client/src/lib/useAuth.ts"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { isLoggedIn, getToken } from \"@/lib/auth\";\n\nexport function useAuth() {\n  const [authed, setAuthed] = useState<boolean>(isLoggedIn());\n  const [token, setTokenState] = useState<string | null>(getToken());\n\n  useEffect(() => {\n    const update = () => {\n      setAuthed(isLoggedIn());\n      setTokenState(getToken());\n    };\n    window.addEventListener(\"ste-auth\", update);\n    window.addEventListener(\"storage\", update);\n    return () => {\n      window.removeEventListener(\"ste-auth\", update);\n      window.removeEventListener(\"storage\", update);\n    };\n  }, []);\n\n  return { authed, token };\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AAFA;;;AAIO,SAAS;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,gVAAQ,EAAU,IAAA,gIAAU;IACxD,MAAM,CAAC,OAAO,cAAc,GAAG,IAAA,gVAAQ,EAAgB,IAAA,8HAAQ;IAE/D,IAAA,iVAAS,EAAC;QACR,MAAM,SAAS;YACb,UAAU,IAAA,gIAAU;YACpB,cAAc,IAAA,8HAAQ;QACxB;QACA,OAAO,gBAAgB,CAAC,YAAY;QACpC,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO;YACL,OAAO,mBAAmB,CAAC,YAAY;YACvC,OAAO,mBAAmB,CAAC,WAAW;QACxC;IACF,GAAG,EAAE;IAEL,OAAO;QAAE;QAAQ;IAAM;AACzB","debugId":null}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///Users/andrewmcclelland/Documents/spotify-track-explorer/ste-client/src/components/Navbar.tsx"],"sourcesContent":["\"use client\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport { useAuth } from \"@/lib/useAuth\";\nimport { clearToken } from \"@/lib/auth\";\nimport { useEffect, useState } from \"react\";\n\nexport default function Navbar() {\n  const router = useRouter();\n  const { authed } = useAuth();\n\n  const [mounted, setMounted] = useState(false);\n  useEffect(() => setMounted(true), []);\n  if (!mounted) {\n    return (\n      <nav className=\"navbar bg-base-200\">\n        <div className=\"container mx-auto flex gap-2 p-2\" suppressHydrationWarning>\n          <Link className=\"btn btn-ghost\" href=\"/\">Home</Link>\n        </div>\n      </nav>\n    );\n  }\n\n  return (\n    <nav className=\"navbar bg-base-200\">\n      <div className=\"container mx-auto flex gap-2 p-2\" suppressHydrationWarning>\n        <Link className=\"btn btn-ghost\" href=\"/\">\n          Home\n        </Link>\n        {authed ? (\n          <>\n            <Link className=\"btn btn-ghost\" href=\"/me\">\n              Me\n            </Link>\n            <button\n              className=\"btn btn-outline\"\n              onClick={() => {\n                clearToken();\n                router.replace(\"/login\");\n              }}\n            >\n              Log out\n            </button>\n          </>\n        ) : (\n          <>\n            <Link className=\"btn btn-ghost\" href=\"/register\">\n              Register\n            </Link>\n            <Link className=\"btn btn-ghost\" href=\"/login\">\n              Login\n            </Link>\n          </>\n        )}\n      </div>\n    </nav>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AALA;;;;;;;AAOe,SAAS;IACtB,MAAM,SAAS,IAAA,8QAAS;IACxB,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,gIAAO;IAE1B,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gVAAQ,EAAC;IACvC,IAAA,iVAAS,EAAC,IAAM,WAAW,OAAO,EAAE;IACpC,IAAI,CAAC,SAAS;QACZ,qBACE,6WAAC;YAAI,WAAU;sBACb,cAAA,6WAAC;gBAAI,WAAU;gBAAmC,wBAAwB;0BACxE,cAAA,6WAAC,sSAAI;oBAAC,WAAU;oBAAgB,MAAK;8BAAI;;;;;;;;;;;;;;;;IAIjD;IAEA,qBACE,6WAAC;QAAI,WAAU;kBACb,cAAA,6WAAC;YAAI,WAAU;YAAmC,wBAAwB;;8BACxE,6WAAC,sSAAI;oBAAC,WAAU;oBAAgB,MAAK;8BAAI;;;;;;gBAGxC,uBACC;;sCACE,6WAAC,sSAAI;4BAAC,WAAU;4BAAgB,MAAK;sCAAM;;;;;;sCAG3C,6WAAC;4BACC,WAAU;4BACV,SAAS;gCACP,IAAA,gIAAU;gCACV,OAAO,OAAO,CAAC;4BACjB;sCACD;;;;;;;iDAKH;;sCACE,6WAAC,sSAAI;4BAAC,WAAU;4BAAgB,MAAK;sCAAY;;;;;;sCAGjD,6WAAC,sSAAI;4BAAC,WAAU;4BAAgB,MAAK;sCAAS;;;;;;;;;;;;;;;;;;;AAQ1D","debugId":null}}]
}